 # Copyright (c) 2022, salesforce.com, inc.
 # All rights reserved.
 # SPDX-License-Identifier: BSD-3-Clause
 # For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause

model:
    arch: blip2_llama
    model_type: blip2_llama
    max_txt_len: 2048
    end_sym: "</s>"
    low_resource: False

    # ViT
    vit_model: "ckpt/eva-vit-g/eva_vit_g.pth"
    freeze_vit: True
    drop_path_rate: 0
    vit_precision: "fp16"

    #Llama
    llama_model: "ckpt/Video-LLaMA-2-7B-Finetuned/llama-2-7b-chat-hf/"
    frozen_llama_proj: False
    use_grad_checkpoint: True
    lora: True
    lora_r: 256
    lora_alpha: 256
    lora_inference_mode: False

    # QFormer
    freeze_qformer: True
    num_query_token: 32
    q_former_model: "results/pretrain_epoch_5_3.896_w8.pth"
    image_size: [512, 288]
    context_size: 8
    qformer_text_input: False


data:
    vis_root: "/scratch/users/atacelen/Reconstructions3D"
    ann_root: "/scratch/users/atacelen/Reconstructions3D/annotations_cleaned_v2.json"
    tokenizer_name: "ckpt/Video-LLaMA-2-7B-Finetuned/llama-2-7b-chat-hf/"
    data_type: video
    model_type: "llama_v2"
    sample_type: 'rand'
    max_txt_len: 1536

train:
  batch_size: 1
  num_workers: 2
  weight_decay: 0.05
  log_freq: 50
  init_lr: 3e-5
  min_lr: 1e-6
  warmup_lr: 1e-6
  use_amp: True
  accum_grad_iters: 8

run:
  output_dir: "/scratch/users/atacelen/housetour/results/"
  max_epochs: 20
  eval_only: False
